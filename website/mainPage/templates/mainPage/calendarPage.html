{% extends 'base.html' %}
{% block head %}
    <style>
        body {font-family: Helvetica, sans-serif;}

        <style type="text/css">     
        
            ::-webkit-scrollbar {
                width: 4px;
            }

            ::-webkit-scrollbar-track {
                background: #f1f1f1; 
            }

            ::-webkit-scrollbar-thumb {
                background: #ddd; 
            }

            table {
                width: 100%;
                table-layout: fixed;
            }

            .calendar{ 
                position: relative;
                width: 100%;
                margin: auto;
                background-color:#fbfbfb;
            }

            .month {
                width: 100%;
                padding: 20px 25px;
                margin: 20px auto 0px auto;
                text-align:right;
                background-color:coral;
                color: white;
                font-size: 27px;
                text-transform: uppercase;
                font-weight: bold;
            }

            .week {
                width: 100%;
                table-layout: fixed;
                padding:5px 0px;
                margin: auto;
                background-color:#ddd;
            }

            .weekday {
                height: 30px;
                text-align: center;
                color: #666;
                font-size: 14px;
                text-transform: uppercase;
            }

            .date{
                position: relative;
                height: 120px;
                color: #777;
                border-bottom: 1px solid #ddd;
                border-left: 1px solid #ddd;
                border-right: 1px solid #ddd;
            }

            .empty {
                position: relative;
                height: 120px;
                border-bottom: 1px solid #ddd;
            }

            .day {
                position: relative;
                top: -1px;
                left: 5px;
                width: 20px;
                height: 20px;
                text-align: center;
                padding-top: 1px; 
                font-size:12px;
                color: #777;
                font-weight: bold;
            }

            .today {
                position: relative;
                height: 125px;
                color: #777;
                border: 1px solid #ddd;
                background-color: #eee;
            }

            .events {
                position: relative;
                height: 70%;
                width: 95%;
                overflow-y: auto;
                left: 5px;
                top: 2px;
                font-size: 12px;
                padding: 0 5px;
            }

            .dot {
                height: 7px;
                width: 7px;
                border-radius: 50%;
                display: inline-block;
                margin-right: 5px;
            }

            .next {
                padding: 2px 3px;
            }

            .next a:hover {
                color: #ffa584;
                text-decoration: none;
            }

            .prev {
                padding: 2px 3px;
            }

            .prev a:hover {
                color: #ffa584;
                text-decoration: none;
            }

            a {
                text-decoration:none;
                color: white;
            }


    </style>
{% endblock %}

{% block right %}

<div class="month">
    <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle float-left" style="background-color: coral; border: coral; color: white;" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        MONTH
    </button>
    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">WEEK</a>
        <a class="dropdown-item active" href="#">MONTH</a>
        <a class="dropdown-item" href="#">YEAR</a>
    </div>
    </div>     
    {{cur_name_of_month}} {{cur_year}}        
    <span class="prev"><a href="#">&#10094;</a></span>
    <span class="next"><a href="#">&#10095;</a></span>
</div>

<div class="week">
    <table>
        <tr>
            <td class="weekday">
                Sunday
            </td>            
            <td class="weekday">
                Monday
            </td>
            <td class="weekday">
                Tuesday
            </td>
            <td class="weekday">
                Wednesday
            </td>
            <td class="weekday">
                Thursday
            </td>
            <td class="weekday">
                Friday
            </td>
            <td class="weekday">
                Saturday
            </td>            
        </tr>
    </table>
</div>

<div class="calendar">
    <table>
        <tr>
            {%for i in first_day%}
            <td class="empty">
            </td>
            {% endfor %}  
            {% for i in cur_num_days %}
            {% if today_day == forloop.counter and cur_month == today_month and cur_year == today_year %}
                <td class="today">
            {% else %}
                <td class="date">
            {% endif %}    
                <div class="day">{{forloop.counter}}</div>
                <div class="events">
                    {% for event in events %}
                        {% if event.date_time.day == forloop.parentloop.counter and event.date_time.month == cur_month and event.date_time.year == cur_year %}
                        <div><span class="dot" style="background-color: pink"></span>{{event.name}}</div>
                        {% endif %}
                    {% endfor %}
                </div>
                
            </td>
                {% if forloop.counter|add:num_day|divisibleby:7%}
                    </tr><tr>
                {%endif%}
            {%endfor%}
        </tr>
    </table>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
//   $(document).ready(function(){

    //   $(".prev").click(function(){
    //       alert("xd");
    //   })

    $(document).ready(function(){
      $(".next").click(function(){
          window.location.href = "{% url 'mainPage:nextMonth' %}";   
    });
      $(".prev").click(function(){
          window.location.href = "{% url 'mainPage:prevMonth' %}";   
    });
    $(".today-button").click(function(){
          window.location.href = "{% url 'mainPage:currentTime' %}";   
    });
 })
  </script>


{% endblock %}